(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9571],{60092:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/features/weekly-features",function(){return s(61482)}])},61482:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return N},default:function(){return g}});var o=s(52676),l=s(75271),i=s(98339),a=s(9786),r=s(40507),n=s.n(r),d=s(82187),u=s.n(d),c=s(82422);s(46424);var m=s(75317),v=s(95481);class p extends l.Component{componentDidMount(){if(document.addEventListener("mousedown",this.handleMouseClickOutside),document.addEventListener("touchstart",this.handleMouseClickOutside),!this.hasFocused&&this.props.focusOnOpen){let e=document.querySelector("#"+this.props.focusOnOpen);e&&(setTimeout(()=>{e.focus()},33),this.hasFocused=e)}}componentWillUnmount(){document.removeEventListener("mousedown",this.handleMouseClickOutside),document.removeEventListener("touchstart",this.handleMouseClickOutside)}handleMouseClickOutside(e){e.stopPropagation(),(e.target.parentNode.classList.contains("fm-modal")||e.target.classList.contains("fm-modal"))&&(e.preventDefault(),this.props.closePortal())}render(){let e="fm-modal",{modalClass:t,focusOnOpen:s}=this.props,l={};return s&&(l["aria-labelledby"]=s),(0,o.jsx)("div",{className:e+(t?" ".concat(e,"--").concat(t):""),role:"dialog",...l,children:(0,o.jsx)("div",{className:"wrapper",children:this.props.children})})}constructor(e,t){super(e,t),this.handleMouseClickOutside=this.handleMouseClickOutside.bind(this)}}p.propTypes={modalClass:n().string};var h=s(23012);s(74925);let b=e=>{let[t,s]=(0,l.useState)(!1),[i,a]=(0,l.useState)(!1),[r,n]=(0,l.useState)(""),[d,b]=(0,l.useState)(!0),f=(0,c.v9)(e=>e.user);(0,c.v9)(e=>e.basket);let y=(0,c.I0)();(0,l.useEffect)(()=>{n(i?"My Store":"Make My Store")},[i]),(0,l.useEffect)(()=>{e.storeObject||b(!1)},[e.storeObject]);let j=t=>{if(t.preventDefault(),t.stopPropagation(),!x()){let t=e.storeObject;y((0,m.bG)(t)),(0,h.xQ)("".concat(e.storeObject.storeName," is now your default store"))}},x=()=>{var t;let s=f.preferredStore;return s&&(null==s?void 0:s.sysId)===(null===(t=e.storeObject)||void 0===t?void 0:t.sysId)},k=()=>t&&(0,o.jsx)(v.Z,{children:(0,o.jsx)(p,{modalClass:"add-to-basket",children:(0,o.jsx)("div",{className:"main-nav-basket-flyout",children:(0,o.jsx)("p",{className:"main-nav-basket-flyout__message",children:"There are some items in your basket that are not available at your new store. Please change your preferred store or the items will be removed automatically when you click on your basket to begin checkout."})})})});return e.inStoreList?(0,o.jsxs)("div",{className:"store-button-nav",children:[" ",(()=>{let t=x(),{storeObject:s}=e,l=u()({"my-store-button":!0,"my-store-button--loaded":f.loaded,"my-store-button-list-button":!0,"my-store-button-list-button--active":t,"is-disabled":d}),i="Make My Store";t&&(i="My Store");let a=s?"Make store on ".concat(s.address," ").concat(s.city," ").concat(s.state," my default store"):"";return(0,o.jsx)("a",{className:l,href:"#",onClick:j,"aria-label":a,children:i})})(),k()," "]}):e.inHero?(0,o.jsxs)("div",{className:"store-button-nav",children:[" ",(()=>{let t=x(),s=u()({"my-store-button":!0,"my-store-button--loaded":f.loaded,"my-store-button-hero-button":!0,"my-store-button-hero-button--active":t,"my-store-button-hero-button--as-capsule":e.asCapsule,"my-store-button-hero-button--left-align":e.leftAlign,"is-disabled":!e.storeObject}),l="Make My Store";return t&&(l="My Store"),(0,o.jsx)("a",{className:s,href:"#",onClick:j,children:l})})(),k()," "]}):(0,o.jsxs)("h1",{children:[" props.inHero = ",e.inHero," , this my store style not defined "]})};b.propTypes={storeObject:n().shape({sysId:n().string}),inStoreList:n().bool,inHero:n().bool,asCapsule:n().bool},b.defaultProps={storeObject:null,inStoreList:!1,inHero:!1,asCapsule:!1};var f=s(96646),y=s(25238),j=s(48838),x=s(9530),k=s(9669),S=s(2104),C=s(16025),N=!0,g=e=>{var t,r,n,d,u,m,v,p;let h=Object.keys(e.weeklySpecialsContent).map(t=>e.weeklySpecialsContent[t]),N=(0,c.v9)(e=>e.user),[g,w]=(0,l.useState)(null==N?void 0:N.preferredStore),[M,O]=(0,l.useState)({items:[]}),[_,P]=(0,l.useState)(h[0]),[E,T]=(0,l.useState)(!0),H=null===(n=e.weeklySpecialsMeta)||void 0===n?void 0:null===(r=n.specialsPage)||void 0===r?void 0:null===(t=r.disclaimerModule)||void 0===t?void 0:t.disclaimer,I={...null===(u=e.weeklySpecialsMeta)||void 0===u?void 0:null===(d=u.specialsPage)||void 0===d?void 0:d.hero,ctaButtonLabel:"Change Your Store",ctaButtonUrl:(0,j.K)("/your-market/store-locator"),subHeaderText:null===(m=h[0])||void 0===m?void 0:m.availableDates};(0,l.useEffect)(()=>{w(null==N?void 0:N.preferredStore)},[N]),(0,l.useEffect)(()=>{g&&T(!1)},[g]),(0,l.useEffect)(()=>{var e,t,s,o,l,i,a,r,n,d,u,c,m;let v;h=h.filter(e=>{let t=new Date(e.startDate),s=new Date(e.endDate),o=new Date;return o>=t&&o<=s});for(let e=0;e<h.length;e++)for(let t=0;t<(null===(o=h[e].applicableStoresCollection)||void 0===o?void 0:null===(s=o.items)||void 0===s?void 0:s.length);t++)(null===(i=h[e].applicableStoresCollection)||void 0===i?void 0:null===(l=i.items)||void 0===l?void 0:l[t].storeNumber)===(null==g?void 0:g.storeNumber)&&(v=h[e],I.subHeaderText=null===(a=h[e])||void 0===a?void 0:a.availableDates);v&&(null==v?void 0:null===(t=v.specialItemsCollection)||void 0===t?void 0:null===(e=t.items)||void 0===e?void 0:e.length)?(P((0,y.Zf)((null==v?void 0:null===(r=v.specialItemsCollection)||void 0===r?void 0:r.items)||[]).filtersMap),O((0,y.Zf)((null==v?void 0:null===(n=v.specialItemsCollection)||void 0===n?void 0:n.items)||h[0]).filtersMap[0])):(P((0,y.Zf)((null===(u=h[0])||void 0===u?void 0:null===(d=u.specialItemsCollection)||void 0===d?void 0:d.items)||[]).filtersMap),O((0,y.Zf)((null===(m=h[0])||void 0===m?void 0:null===(c=m.specialItemsCollection)||void 0===c?void 0:c.items)||[]).filtersMap[0]))},[g]);let{seo:L}=e,Z=I.subHeaderText?I.subHeaderText:"Please select a store to check out this week`s features just for you.";return(0,o.jsx)(i.i7,{...e,children:(0,o.jsxs)("div",{children:[(0,o.jsx)(a.Z,{seo:L,url:null===(v=s.g.window)||void 0===v?void 0:v.location.href,title:L.title,description:L.description,image:I.heroImage.url}),(0,o.jsxs)(i.VM,{moduleName:"weekly-specials-hero",productHero:!0,title:I.headerText,secondaryTitle:I.secondaryHeaderText,subtitle:Z,image:I.heroImage.url,showLogoPrint:!0,children:[(0,o.jsx)(C.Z,{storeNumber:null==g?void 0:g.storeNumber,onStoreSelected:e=>{let t=e||null;w(t),t?T(!1):T(!0)},alignToGrid:!0,forWeeklySpecials:!0,className:(null==g?void 0:g.storeNumber)?"has-store":"no-store",checkout:!1}),(0,o.jsx)(b,{storeObject:g,inHero:!0,asCapsule:!0,leftAlign:!0}),(0,o.jsx)("div",{className:"cta-wrapper wrapper cta-wrapper--hero-back-link",children:(0,o.jsxs)("div",{className:"cta-wrapper__right",children:[(0,o.jsx)(f.Z,{buttonStyle:"normal",label:"",className:"capsule-button"}),(0,o.jsx)(S.Z,{title:L.title,description:L.description,image:I.heroImage.url})]})})]}),(null==M?void 0:null===(p=M.items)||void 0===p?void 0:p.length)>0&&_?(0,o.jsxs)(i.KP,{moduleClassName:"home-specials-board",iconClass:"icon-fm_leaf",children:[(0,o.jsx)(x.Z,{filtersMap:_,onChange:e=>{O(e)}}),(0,o.jsx)(k.Z,{items:M.items,hidePrice:E,type:"Product Card"}),(0,o.jsx)(i.KP,{moduleCLassName:"disclaimer-wrapper",children:(0,o.jsx)("div",{className:"wrapper",style:{maxWidth:"100%"},children:(0,o.jsx)("div",{className:"rich-text deploy-validate",children:(0,o.jsx)("div",{className:"disclaimer disclaimer--bottom disclaimer--is-print",children:(0,o.jsx)("p",{children:H})})})})})]}):(0,o.jsx)("div",{className:"alignitem-center",children:"No items are avilable"})]})})}}},function(e){e.O(0,[2748,4269,2888,9774,179],function(){return e(e.s=60092)}),_N_E=e.O()}]);