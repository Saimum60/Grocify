(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1603],{94730:function(e,l,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/loyalty",function(){return n(55618)}])},76882:function(e,l,n){"use strict";n.d(l,{FO:function(){return d},P6:function(){return r},c:function(){return a}});var o=n(75271),i=n(764),t=n(35861);let a=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.NONE;if(!Object.values(r).includes(e))throw Error("Invalid path type: ".concat(e));if(!Object.values(d).includes(l))throw Error("Invalid filter type: ".concat(l));let{getIdTokenClaims:n,isAuthenticated:a}=(0,i.D3)(),[s,c]=(0,o.useState)(null);(0,o.useEffect)(()=>{let l=async()=>{a&&c((await n()).inmarToken)};e!==r.ALL_OFFERS&&l()},[n,a,e]);let{data:p,error:v,isLoading:f}=(0,t.ZP)(e===r.ALL_OFFERS||s?[e]:null,async()=>{let l={"Content-Type":"application/json","x-retailer":"thefreshmarket"};e!==r.ALL_OFFERS&&(l["x-auth-token"]=s);let n=await fetch(e,{method:"GET",headers:l});if(!n.ok)throw Error("Failed to fetch data");return n.json()});return{data:p&&401!==p.status?l===d.NONE?p:p.filter(e=>(null==e?void 0:e.type)===l&&u(e)):[],error:v,isLoading:f}},r={ALL_OFFERS:"".concat("https://api.thefreshmarket.com/inmar/ice","/v2/offers?limit=400"),ALL_USERS_OFFERS:"".concat("https://api.thefreshmarket.com/inmar/ice","/v2/offers/ranked?limit=400&contextTypes=targeted,campaign,relevant,unranked"),CLIPPED_USERS_OFFERS:"".concat("https://api.thefreshmarket.com/inmar/ice","/v2/offers/ranked?limit=400&contextTypes=targeted,campaign,relevant,unranked&groups=clipped")},d={NONE:"none",MFG:"mfg",STORE:"store"},u=e=>{let l=(null==e?void 0:e.tags.map(e=>e.toLowerCase()).indexOf("birthday"))!==-1,n=(null==e?void 0:e.tags.map(e=>e.toLowerCase()).indexOf("clubreward"))!==-1,o=(null==e?void 0:e.tags.map(e=>e.toLowerCase()).indexOf("surprise"))!==-1;if(!l&&!n&&!o)return e}},55618:function(e,l,n){"use strict";n.r(l),n.d(l,{__N_SSG:function(){return p}});var o=n(52676),i=n(98339),t=n(32560),a=n(40507),r=n.n(a),d=n(76882),u=n(98715),s=n.n(u);let c=e=>{var l,n,a;let{data:r}=(0,d.c)(d.P6.ALL_OFFERS),{data:u}=(0,d.c)(d.P6.ALL_USERS_OFFERS),c=(0,t.q6)();return(0,o.jsxs)(i.i7,{...e,children:[(0,o.jsx)(i.Xz,{...null==e?void 0:null===(l=e.explainerPage)||void 0===l?void 0:l.hero,isLoggedIn:c.isAuthenticated}),(null==e?void 0:null===(n=e.explainerPage)||void 0===n?void 0:n.sections)&&(null==e?void 0:null===(a=e.explainerPage)||void 0===a?void 0:a.sections.map(e=>{var l,n;switch(null==e?void 0:e.__typename){case"ValuePropositionGroup":return(0,o.jsx)(i.G9,{colorTheme:null==e?void 0:e.colorTheme,backgroundImage:null==e?void 0:e.backgroundImage,description:null==e?void 0:e.description,floating:(null==e?void 0:e.style[0])==="Floating",headline:null==e?void 0:e.headline,name:null==e?void 0:e.headline,valuePropositions:null==e?void 0:null===(l=e.valuePropositionsCollection)||void 0===l?void 0:l.items},null==e?void 0:e.sys.id);case"CountdownTimer":return(0,o.jsx)(i.Fj,{timerId:null==e?void 0:e.timerId,backgroundColor:null==e?void 0:e.backgroundColor},null==e?void 0:e.sys.id);case"LargeValueProposition":return(0,o.jsx)(i.vK,{colorTheme:null==e?void 0:e.colorTheme,valueProposition:null==e?void 0:e.valueProposition},null==e?void 0:e.sys.id);case"OfferGroup":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:["OfferGroup: ",null==e?void 0:e.headline]}),(0,o.jsx)("div",{className:s().CouponInfo,children:(0,o.jsx)(i.XQ,{addedToWalletCopy:null==e?void 0:e.addedToWalletCopy,clipCtaCopy:null==e?void 0:e.clipCtaCopy,couponList:(null==u?void 0:u.length)>0?u:r,description:null==e?void 0:e.description,displayOnly:!0,headline:null==e?void 0:e.offerGroupHeadline,offerType:null==e?void 0:e.type[0],id:null==e?void 0:e.sys.id,isExplainer:!0,noOfferMessage:null==e?void 0:e.noOffersMessage,numberOfOffers:null==e?void 0:e.numberOfOffers,successfullyClippedCopy:null==e?void 0:e.successfullyClippedCopy,type:null==e?void 0:e.type,loyaltyTextAlign:s().LoyaltyTextAlign,...e},null==e?void 0:e.sys.id)},null==e?void 0:e.sys.id)]});case"Cta":return(0,o.jsx)(i.FE,{className:s().CtaWrapper,children:(0,o.jsx)(i._D,{headline:null==e?void 0:e.ctaHeadline,description:null==e?void 0:e.ctaDescription,ctaButton:null==e?void 0:e.ctaButton,showSecondaryCta:(null==e?void 0:null===(n=e.secondaryCta)||void 0===n?void 0:n.url.length)>0,isSingle:!0})},null==e?void 0:e.sys.id);case"CtaGroup":return(0,o.jsx)(i.c,{colorTheme:null==e?void 0:e.ctaGroupColorTheme,headline:null==e?void 0:e.ctaGroupHeadline,ctas:null==e?void 0:e.ctasCollection},null==e?void 0:e.sys.id);default:return null}}))]})};c.propTypes={explainerPage:r().object};var p=!0;l.default=c},98715:function(e){e.exports={CouponInfo:"Loyalty_CouponInfo__c3uaB",LoyaltyTextAlign:"Loyalty_LoyaltyTextAlign__pIOjq",CtaWrapper:"Loyalty_CtaWrapper__EWgdy"}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=94730)}),_N_E=e.O()}]);